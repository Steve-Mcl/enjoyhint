"use strict";!function(t){"function"==typeof define&&define.amd?define(["jquery","./jquery.enjoyhint.js","jquery.scrollto"],t):"function"==typeof require&&"object"==typeof exports?module.exports=t(require("jquery"),require("./jquery.enjoyhint.js"),require("jquery.scrollto")):window.EnjoyHint=t(jQuery)}(function(k){return function(t){var l;const d=this;var e=t||{};const u=e.btnPrevText||"Previous",p=e.btnNextText||"Next",_=e.btnSkipText||"Skip",i=e.btnCloseText||"Close",n=e.backgroundColor||"rgba(0,0,0,0.6)";var o,r="enjoyhint-element-available",t={onStart:function(){},onEnd:function(){},onSkip:function(){},onNext:function(){},elementToScroll:document.body},s=k.extend(t,e),c=[],f=0,y=k("body"),h=function(t){t.preventDefault()},v=function(){k(".enjoyhint").remove(),y.css({overflow:o}),k(document).off("touchmove",h)};d.clear=function(){var t=k(".enjoyhint_next_btn"),e=k(".enjoyhint_skip_btn"),n=k(".enjoyhint_prev_btn"),o=k(".enjoyhint_close_btn");n.removeClass(d.prevUserClass),t.removeClass(d.nextUserClass),e.removeClass(d.skipUserClass),n.text(u),t.text(p),e.text(_),o.text(i)};var m=function(t){if(!c||!c[f])return y.enjoyhint("hide"),s.onEnd(),void v();s.onNext();var a=c[f];y.off(r);if(!t&&null!=a.pausedUntil&&null!=a.pausedUntil.event)return y.enjoyhint("hide"),void("available"===a.pausedUntil.event?(y.on(r,function(){m(!0),y.off(r)}),function(t,e){null==e&&(e=150);function n(){k(t).is(":visible")?y.trigger(r):setTimeout(n,e)}setTimeout(n,0)}(a.pausedUntil.selector)):null==a.pausedUntil.selector?x(a.pausedUntil.event,function(){m(!0),j(a.pausedUntil.event)}):k(a.pausedUntil.selector).on(a.pausedUntil.event,function(){m(!0),k(a.pausedUntil.selector).off(a.pausedUntil.event)}));var n=a.scrollAnimationSpeed;a.onBeforeStart&&"function"==typeof a.onBeforeStart&&a.onBeforeStart();t=a.timeout||0;setTimeout(function(){if(!a.selector)for(var t in a)a.hasOwnProperty(t)&&t.split(" ")[1]&&(a.selector=t.split(" ")[1],a.event=t.split(" ")[0],"next"!=t.split(" ")[0]&&"auto"!=t.split(" ")[0]&&"custom"!=t.split(" ")[0]||(a.event_type=t.split(" ")[0]),a.description=a[t]);setTimeout(function(){d.clear()},250);var e=k(a.selector).get(0).getBoundingClientRect();e.top<0||e.bottom>(window.innerHeight||document.documentElement.clientHeight)?(y.enjoyhint("render_circle",[]),k("#enjoyhint_label").remove(),k("#enjoyhint_arrow_line").remove(),y.enjoyhint("hide_prev"),y.enjoyhint("hide_next"),y.enjoyhint("hide_skip"),y.enjoyhint("hide_close"),k(s.elementToScroll).scrollTo(a.selector,a.scrollAnimationSpeed||250,{offset:-200})):n=250,setTimeout(function(){var t=k(a.selector),e=g(a.event);if(y.enjoyhint("show"),l=t,(l=a.event_selector?k(a.event_selector):l).off(e),t.off("keydown"),a.event_type||"key"!=a.event||t.keydown(function(t){t.which==a.keyCode&&(f++,m())}),y.enjoyhint("show_next"),!1===a.showNext&&y.enjoyhint("hide_next"),y.enjoyhint("hide_prev"),0!==f&&y.enjoyhint("show_prev"),0==a.showPrev&&y.enjoyhint("hide_prev"),0==a.showSkip?y.enjoyhint("hide_skip"):y.enjoyhint("show_skip"),y.enjoyhint("show_close"),a.nextButton&&((s=k(".enjoyhint_next_btn")).addClass(a.nextButton.className||""),s.text(a.nextButton.text||p),d.nextUserClass=a.nextButton.className),a.prevButton&&((c=k(".enjoyhint_prev_btn")).addClass(a.prevButton.className||""),c.text(a.prevButton.text||u),d.prevUserClass=a.prevButton.className),a.skipButton&&((h=k(".enjoyhint_skip_btn")).addClass(a.skipButton.className||""),h.text(a.skipButton.text||_),d.skipUserClass=a.skipButton.className),a.event_type)switch(a.event_type){case"auto":return t[a.event](),a.event,f++,void m();case"custom":x(a.event,function(){f++,j(a.event),m()});break;case"next":y.enjoyhint("show_next")}else{var n=!1;l.one(e,function(t){n||(n=!0,a.keyCode&&t.keyCode!=a.keyCode||(l.off(e),f++,m()))})}var o=Math.max(t.outerWidth(),t.outerHeight()),i=a.radius||Math.round(o/2)+5,r=t.offset(),s=t.outerWidth(),c=t.outerHeight(),h=void 0!==a.margin?a.margin:10,o={x:r.left+Math.round(s/2),y:r.top+Math.round(c/2)-k(document).scrollTop()},r={enjoyHintElementSelector:a.selector,center_x:o.x,center_y:o.y,text:a.description,arrowColor:a.arrowColor,top:a.top,bottom:a.bottom,left:a.left,right:a.right,margin:a.margin,scroll:a.scroll,preventEvents:a.preventEvents},o={nextButton:a.nextButton,prevButton:a.prevButton};if(0===r.center_x&&0===r.center_y)return y.enjoyhint("hide"),v(),console.log("Error: Element position couldn't be reached");a.shape&&"circle"==a.shape?(r.shape="circle",r.radius=i):(r.radius=0,r.width=s+h,r.height=c+h),y.enjoyhint("render",r,d.stop,o)},n+20||270)},t)},a=function(){f++,m()},w=function(){f--,m()},b=function(){var t=c[f],e=k(t.selector);j(t.event),e.off(g(t.event)),v()},g=function(t,e){return t+(e?"custom":"")+".enjoy_hint"},x=function(t,e){y.on(g(t,!0),e)},j=function(t){y.off(g(t,!0))};window.addEventListener("resize",function(){null!=l&&y.enjoyhint("redo_events_near_rect",l[0].getBoundingClientRect())},!1),d.stop=function(){b()},d.reRunScript=function(t){f=t,m()},d.runScript=function(){f=0,s.onStart(),m()},d.resumeScript=function(){m()},d.setCurrentStep=function(t){f=t},d.getCurrentStep=function(){return f},d.trigger=function(t){switch(t){case"next":a();break;case"skip":b(),s.onSkip();break;default:y.trigger(g(t,!0))}},d.setScript=function(t){if(!(t instanceof Array)&&t.length<1)throw new Error("Configurations list isn't correct.");c=t},d.set=function(t){d.setScript(t)},d.setSteps=function(t){d.setScript(t)},d.run=function(){d.runScript()},d.resume=function(){d.resumeScript()},k(".enjoyhint")&&k(".enjoyhint").remove(),o=y.css("overflow"),y.css({overflow:"hidden"}),k(document).on("touchmove",h),y.enjoyhint({onNextClick:function(){a()},onPrevClick:function(){w()},onSkipClick:function(){s.onSkip(),b()},fill:n,elementToScroll:s.elementToScroll})}}),CanvasRenderingContext2D.prototype.roundRect=function(t,e,n,o,i){return o<2*(i=n<2*i?n/2:i)&&(i=o/2),this.beginPath(),this.moveTo(t+i,e),this.arcTo(t+n,e,t+n,e+o,i),this.arcTo(t+n,e+o,t,e+o,i),this.arcTo(t,e+o,t,e,i),this.arcTo(t,e,t+n,e,i),this.closePath(),this},function(t){"function"==typeof define&&define.amd?define(["jquery","kinetic"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery"),require("kinetic")):t(jQuery,Kinetic)}(function(O,d){var F,u=window.innerWidth,p=window.innerHeight,e={init:function(a){return this.each(function(){this.enjoyhint_obj={},(F=this.enjoyhint_obj).resetComponentStuff=function(){u=window.innerWidth,p=window.innerHeight};var t=O(this);function l(t,e){var n,o=document.createElementNS("http://www.w3.org/2000/svg",t);for(n in e)o.setAttribute(n,e[n]);return o}F.options=O.extend({onNextClick:function(){},onSkipClick:function(){},onPrevClick:function(){},animation_time:800},a),F.gcl={chooser:"enjoyhint"},F.cl={enjoy_hint:"enjoyhint",hide:"enjoyhint_hide",disable_events_element:"enjoyhint_disable_events",btn:"enjoyhint_btn",skip_btn:"enjoyhint_skip_btn",close_btn:"enjoyhint_close_btn",next_btn:"enjoyhint_next_btn",previous_btn:"enjoyhint_prev_btn",main_canvas:"enjoyhint_canvas",main_svg:"enjoyhint_svg",svg_wrapper:"enjoyhint_svg_wrapper",svg_transparent:"enjoyhint_svg_transparent",kinetic_container:"kinetic_container"},F.canvas_size={w:1.4*O(window).width(),h:1.4*O(window).height()};F.enjoyhint=O("<div>",{class:F.cl.enjoy_hint+" "+F.cl.svg_transparent}).appendTo(t),F.enjoyhint_svg_wrapper=O("<div>",{class:F.cl.svg_wrapper+" "+F.cl.svg_transparent}).appendTo(F.enjoyhint),F.$stage_container=O('<div id="'+F.cl.kinetic_container+'">').appendTo(F.enjoyhint),F.$canvas=O('<canvas id="enj_canvas" width="'+F.canvas_size.w+'" height="'+F.canvas_size.h+'" class="'+F.cl.main_canvas+'">').appendTo(F.enjoyhint),F.$svg=O('<svg width="'+F.canvas_size.w+'" height="'+F.canvas_size.h+'" class="'+F.cl.main_canvas+" "+F.cl.main_svg+'">').appendTo(F.enjoyhint_svg_wrapper);var e=O(l("defs")),n=O(l("marker",{id:"arrowMarker",viewBox:"0 0 36 21",refX:"7",refY:"10",markerUnits:"strokeWidth",orient:"auto",markerWidth:"12",markerHeight:"10"})),t=O(l("path",{style:"fill:none; stroke:rgb(255,255,255); stroke-width:2",d:"M 0 0 c 12 11 12 9 0 20",id:"arrowhead"}));e.append(n.append(t)).appendTo(F.$svg),F.kinetic_stage=new d.Stage({container:F.cl.kinetic_container,width:F.canvas_size.w,height:F.canvas_size.h,scaleX:1}),F.layer=new d.Layer,F.rect=new d.Rect({fill:a.fill,width:F.canvas_size.w,height:F.canvas_size.h});var r=O("<div>",{class:F.cl.disable_events_element}).appendTo(F.enjoyhint),s=r.clone().appendTo(F.enjoyhint),c=r.clone().appendTo(F.enjoyhint),h=r.clone().appendTo(F.enjoyhint),t=function(t){t.stopImmediatePropagation()};O("button").focusout(t),r.click(t),s.click(t),c.click(t),h.click(t),F.$skip_btn=O("<div>",{class:F.cl.skip_btn}).appendTo(F.enjoyhint).html("Skip").click(function(t){F.hide(),F.options.onSkipClick()}),F.$next_btn=O("<div>",{class:F.cl.next_btn}).appendTo(F.enjoyhint).html("Next").click(function(t){F.options.onNextClick()}),F.$close_btn=O("<div>",{class:F.cl.close_btn}).appendTo(F.enjoyhint).html("Close").click(function(t){F.hide(),F.options.onSkipClick()}),F.$prev_btn=O("<div>",{class:F.cl.previous_btn}).appendTo(F.enjoyhint).html("Previous").click(function(t){F.options.onPrevClick()}),F.$canvas.mousedown(function(t){O("canvas").css({left:"4000px"});t=document.elementFromPoint(t.clientX,t.clientY);return O("canvas").css({left:"0px"}),O(t).click(),!1});var i;return F.shape=new d.Shape({radius:0,center_x:-130,center_y:-130,width:0,height:0,sceneFunc:function(t){var e=this.getContext("2d")._context,n=(this.pos,e.globalCompositeOperation);e.globalCompositeOperation="destination-out",e.beginPath();var o=this.attrs.center_x-Math.round(this.attrs.width/2),i=this.attrs.center_y-Math.round(this.attrs.height/2);e.roundRect(o,i,this.attrs.width,this.attrs.height,this.attrs.radius),e.fill(),e.globalCompositeOperation=n}}),F.shape.radius=0,F.layer.add(F.rect),F.layer.add(F.shape),F.kinetic_stage.add(F.layer),O(window).on("resize",function(){if(clearTimeout(i),O(".enjoyhint_next_btn").css("visibility","hidden"),O(".enjoyhint_prev_btn").css("visibility","hidden"),O(".enjoyhint_skip_btn").css("visibility","hidden"),O(".enjoyhint_close_btn").css("visibility","hidden"),O(".enjoy_hint_label").remove(),O("#enjoyhint_arrow_line").remove(),!O(F.stepData.enjoyHintElementSelector).is(":visible"))return F.stopFunction(),void O(window).off("resize");var t=O(F.stepData.enjoyHintElementSelector)[0].getBoundingClientRect();function e(){var t=O(F.stepData.enjoyHintElementSelector).get(0).getBoundingClientRect();F.stepData.center_x=t.left+t.width/2,F.stepData.center_y=t.top+t.height/2,F.stepData.width=t.width+11,F.stepData.height=t.height+11,F.render(F.stepData,F.customBtnProps,function(){console.log("resize done - showing buttons"),O(".enjoyhint_next_btn").css("visibility","visible"),O(".enjoyhint_prev_btn").css("visibility","visible"),O(".enjoyhint_skip_btn").css("visibility","visible"),O(".enjoyhint_close_btn").css("visibility","visible")})}F.shape.attrs.center_x=Math.round(t.left+t.width/2),F.shape.attrs.center_y=Math.round(t.top+t.height/2),F.shape.attrs.width=t.width+11,F.shape.attrs.height=t.height+11,i=setTimeout(function(){t.top<0||t.bottom>(window.innerHeight||document.documentElement.clientHeight)?O(F.options.elementToScroll).scrollTo(F.stepData.enjoyHintElementSelector,150,{offset:-200,onAfter:e}):e()},150);var n=window.innerWidth,o=window.innerHeight,n=n/u,o=o/p;F.kinetic_stage.setAttr("width",u*n),F.kinetic_stage.setAttr("height",p*o),F.rect=new d.Rect({fill:a.fill,width:window.innerWidth,height:window.innerHeight}),F.layer.removeChildren(),F.layer.add(F.rect),F.layer.add(F.shape),F.kinetic_stage.draw()}),F.show=function(){F.enjoyhint.removeClass(F.cl.hide)},F.hide=function(){F.enjoyhint.addClass(F.cl.hide),new d.Tween({node:F.shape,duration:.002,center_x:-130,center_y:-130}).play()},F.hide(),F.hidePrevBtn=function(){console.log("hidePrevBtn"),F.$prev_btn.addClass(F.cl.hide),F.prevBtn="hide"},F.showPrevBtn=function(){console.log("showPrevBtn"),F.$prev_btn.removeClass(F.cl.hide),F.prevBtn="show"},F.hideNextBtn=function(){console.log("hideNextBtn"),F.$next_btn.addClass(F.cl.hide),F.nextBtn="hide"},F.showNextBtn=function(){console.log("showNextBtn"),F.$next_btn.removeClass(F.cl.hide),F.nextBtn="show"},F.hideSkipBtn=function(){F.$skip_btn.addClass(F.cl.hide),F.skipBtn="hide"},F.showSkipBtn=function(){F.$skip_btn.removeClass(F.cl.hide),F.skipBtn="show"},F.hideCloseBtn=function(){F.$close_btn.addClass(F.cl.hide),F.closeBtn="hide"},F.showCloseBtn=function(){F.$close_btn.removeClass(F.cl.hide),F.closeBtn="show"},F.renderCircle=function(t){var e=t.r||0,n=t.x||0,o=t.y||0;new d.Tween({node:F.shape,duration:.2,center_x:n,center_y:o,width:2*e,height:2*e,radius:e}).play();var i=n-e,r=n+e,t=o-e,e=o+e;return{x:n,y:o,left:i,right:r,top:t,bottom:e,conn:{left:{x:i-20,y:o},right:{x:r+20,y:o},top:{x:n,y:t-20},bottom:{x:n,y:e+20}}}},F.renderRect=function(t,e){var n=t.r||0,o=t.x||0,i=t.y||0,r=t.w||0,t=t.h||0;new d.Tween({node:F.shape,duration:e,center_x:o,center_y:i,width:r,height:t,radius:n}).play();e=Math.round(r/2),n=Math.round(t/2),r=o-e,t=o+e,e=i-n,n=i+n;return{x:o,y:i,left:r,right:t,top:e,bottom:n,conn:{left:{x:r-20,y:i},right:{x:t+20,y:i},top:{x:o,y:e-20},bottom:{x:o,y:n+20}}}},F.renderLabel=function(t){var e=t.x||0,n=t.y||0;F.originalElementX=e;var o=F.getLabelElement({x:e,y:n,text:t.text}),i=o.width(),r=o.height(),s=o.offset().left,c=o.offset().left+i,h=o.offset().top-O(document).scrollTop(),e=o.offset().top-O(document).scrollTop()+r,n={x:s-10,y:h+Math.round(r/2)},t={x:c+10,y:h+Math.round(r/2)},r={x:s+Math.round(i/2),y:h-10},i={x:s+Math.round(i/2),y:e+10};return o.detach(),setTimeout(function(){O("#enjoyhint_label").remove(),o.appendTo(F.enjoyhint)},F.options.animation_time/2),{label:o,left:s,right:c,top:h,bottom:e,conn:{left:n,right:t,top:r,bottom:i}}},F.setMarkerColor=function(e){if(function(t){const e=(new Option).style;return e.color=t,""!==e.color}(e))return[O("#arrowhead"),O("#enjoyhint_arrow_line")].forEach(function(t){t.css("stroke",e)});O("#arrowhead").css("stroke","rgb(255,255,255)"),console.log("Error: invalid color name property - "+e)},F.renderArrow=function(t){var n=t.x_from||0,o=t.y_from||0,e=t.x_to||0,i=t.y_to||0,r=Math.min(n,e),s=Math.max(n,e),c=Math.min(o,i),h=Math.max(o,i),a="hor"===t.by_top_side?`Q ${n} ${c+(h-c)/4}, ${r+(s-r)/2} ${c+(h-c)/2} T ${e} ${i}`:`Q ${n} ${i} ${e} ${i}`;F.enjoyhint.addClass(F.cl.svg_transparent),setTimeout(function(){O("#enjoyhint_arrow_line").remove();var t=[];t.push("M",n,o),a&&t.push(a);var e=t.join(" ");console.log("arrow path: "+t),F.$svg.append(l("path",{style:"fill:none; stroke:rgb(255,255,255); stroke-width:3","marker-end":"url(#arrowMarker)",d:e,id:"enjoyhint_arrow_line"})),F.stepData.arrowColor?F.setMarkerColor(F.stepData.arrowColor):O("#arrowhead").css("stroke","rgb(255, 255, 255)"),F.enjoyhint.removeClass(F.cl.svg_transparent)},F.options.animation_time/2)},F.getLabelElement=function(t){return O("<div>",{class:"enjoy_hint_label",id:"enjoyhint_label"}).css({top:t.y+"px",left:t.x+"px"}).html(t.text).appendTo(F.enjoyhint)},F.disableEventsNearRect=function(t,e){var n=t.top,o=t.left,i=t.right,t=t.bottom;!0===e&&(n=t,i=o),r.css({top:"0",left:"0"}).height(n),s.css({top:t+"px",left:"0"}),c.css({top:"0",left:"0px"}).width(o),h.css({top:"0",left:i+"px"})},O.event.special.destroyed={remove:function(t){t.handler&&t.handler()}},F.render=function(t,h,a){a=a||function(){},F.stepData=t,F.customBtnProps=h;var e=function t(e){return"MD-DIALOG"===e.tagName?e:void 0===e.tagName?null:t(O(e).parent()[0])}(O(F.stepData.enjoyHintElementSelector)[0]);null!=e&&O(e).on("dialogClosing",function(){F.stopFunction(),a()}),F.resetComponentStuff();var n=t.shape||"rect",o={},i=0,r=0,s=t.top||0,c=t.bottom||0,l=t.left||0,d=t.right||0;switch(n){case"circle":var i=r=t.radius,u=(_={top:t.center_y-r+s,bottom:t.center_y+r-c,left:t.center_x-i+l,right:t.center_x+i-d}).right-_.left,p=_.bottom-_.top;t.radius=Math.round(Math.min(u,p)/2),i=r=Math.round(t.radius/2);u=Math.round(u/2),p=Math.round(p/2);t.center_x=_.left+u,t.center_y=_.top+p,o=F.renderCircle({x:t.center_x,y:t.center_y,r:t.radius});break;case"rect":i=Math.round(t.width/2);var r=Math.round(t.height/2),_={top:t.center_y-r+s,bottom:t.center_y+r-c,left:t.center_x-i+l,right:t.center_x+i-d};t.width=_.right-_.left,t.height=_.bottom-_.top,i=Math.round(t.width/2),r=Math.round(t.height/2),t.center_x=_.left+i,t.center_y=_.top+r,o=F.renderRect({x:t.center_x,y:t.center_y,w:t.width,h:t.height,r:t.radius},.2)}var f=F.enjoyhint.width(),y=F.enjoyhint.height(),v=F.getLabelElement({x:0,y:0,text:t.text}),m=v.outerWidth(),w=v.outerHeight();v.remove();for(var b=t.center_y-r,e=y-(t.center_y+r),n=t.center_x-i,v=f-(t.center_x+i),y=window.innerHeight<670?130:150,f=window.innerHeight<670?0:40,f=y+w+f,y=r+y,e=[{name:"right_center",common_area:v*window.innerHeight,width:v,height:window.innerHeight},{name:"right_top",common_area:v*b,width:v,height:b},{name:"right_bottom",common_area:v*e,width:v,height:e},{name:"left_center",common_area:n*window.innerHeight,width:n,height:window.innerHeight},{name:"left_top",common_area:n*b,width:n,height:b},{name:"left_bottom",common_area:n*e,width:n,height:e},{name:"center_top",common_area:window.innerWidth*b,width:window.innerWidth,height:b},{name:"center_bottom",common_area:window.innerWidth*e,width:window.innerWidth,height:e}],g=m,x=window.innerHeight<=670?f:f+20,j=e.sort(function(t,e){return t.common_area-e.common_area}),k="oversized",C=0;C<j.length;C++){var B=j[C].name,T=j[C];T.width>g&&T.height>x&&(k=B)}var $,S,M,H,E,N,P="circle"!==t.shape&&t.width||2*t.radius,W="circle"!==t.shape&&t.height||2*t.radius,D=t.center_x+P/2+80,U=t.center_x-m-P/2-80,z=window.innerWidth/2-m/2,R=t.center_y-y-w,q=t.center_y+y,A=window.innerHeight/2-x/2+20,L="hor";switch(k){case"center_top":S=R,$=z,M=t.center_x,H=t.center_y-W/2-20;break;case"center_bottom":S=q,$=z,M=t.center_x,H=t.center_y+W/2+20;break;case"left_center":S=A,$=U,M=t.center_x-P/2-20,H=t.center_y,L="ver";break;case"left_top":S=R,$=U,M=t.center_x-P/2,H=t.center_y-20;break;case"left_bottom":S=q,$=U,M=t.center_x-P/2,H=t.center_y+20,L="ver";break;case"right_center":S=A,$=D,M=t.center_x+P/2+20,H=t.center_y,L="ver";break;case"right_top":S=R,$=D,M=t.center_x+P/2,H=t.center_y-20;break;case"right_bottom":S=q,$=D,M=t.center_x+P/2,H=t.center_y+20,L="ver";break;case"oversized":setTimeout(function(){O("#enjoyhint_arrow_line").remove(),O(".enjoy_hint_label").css({"border-radius":"20px","-webkit-border-radius":"20px","-moz-border-radius":"20px","background-color":"#272A26DD","-webkit-transition":"background-color ease-out 0.5s","-moz-transition":"background-color ease-out 0.5s","-o-transition":"background-color ease-out 0.5s",transition:"background-color ease-out 0.5s"})},450),S=A,$=z}E=$+m/2,N=t.center_y>S+w/2?S+w:S,t.center_y<0?H=20:t.center_y>window.innerHeight+20&&(H=window.innerHeight-20),t.center_y>=S&&t.center_y<=S+w&&(E=t.center_x>$?$+m:$,N=t.center_y),console.log("calling renderLabel",{x:$,y:S,text:t.text}),F.renderLabel({x:$,y:S,text:t.text}),setTimeout(function(){console.log("calculating button positions after rendering label");var t,e;let n=0,o=0,i=10,r=10;"show"===F.prevBtn&&(t=F.$prev_btn.outerWidth(),e=F.$prev_btn.outerHeight(),n+=t+10,o=Math.max(o,e)),"show"===F.nextBtn&&(t=F.$next_btn.outerWidth(),e=F.$next_btn.outerHeight(),n+=t+10,o=Math.max(o,e)),"show"===F.skipBtn&&(s=F.$skip_btn.outerWidth(),c=F.$skip_btn.outerHeight(),n+=s+10,o=Math.max(o,c));var s=F.$close_btn.outerWidth(),c=F.$close_btn.outerHeight();n+=s+10,o=Math.max(o,c),i=E-n+n/2,r=S-o-10;s=function(){return N<=S},c=function(){return E<=M};s()&&(r=S+w+10),r<10&&(r=S+w+10),s()===r<S&&(i=c()?E-10-n:$+10),(n+i>window.innerWidth||i<0)&&(i=10,r=c()?S-(F.$skip_btn.outerHeight()-10):S+w+10),i<10&&(i=10),window.innerWidth<=640?(F.$next_btn.html("&#8250;"),F.$prev_btn.html("&#8249;"),F.$close_btn.html("&times;")):(F.$next_btn.html(h.nextButton&&h.nextButton.text?h.nextButton.text:"Next"),F.$prev_btn.html(h.prevButton&&h.prevButton.text?h.prevButton.text:"Previous"),F.$close_btn.html(h.closeButton&&h.closeButton.text?h.closeButton.text:"Close")),console.log("setting button positions to x/y",i,r);c=i;"show"===F.prevBtn&&(F.$prev_btn.css({left:c,top:r}),c+=F.$prev_btn.outerWidth()+10),"show"===F.nextBtn&&(F.$next_btn.css({left:c,top:r}),c+=F.$next_btn.outerWidth()+10),"show"===F.skipBtn&&(F.$skip_btn.css({left:c,top:r}),c+=F.$skip_btn.outerWidth()+10),F.$close_btn.css({left:c,top:r}),a()},F.options.animation_time/2),F.disableEventsNearRect({top:o.top,bottom:o.bottom,left:o.left,right:o.right},t.preventEvents),console.log("calling renderArrow from / to",{x_from:E,y_from:N,x_to:M,y_to:H,by_top_side:L}),F.renderArrow({x_from:E,y_from:N,x_to:M,y_to:H,by_top_side:L})},F.clear=function(){F.ctx.clearRect(0,0,3e3,2e3)},this})},set:function(t){return this.each(function(){this.enjoyhint_obj.setValue(t)}),this},show:function(){return this.each(function(){this.enjoyhint_obj.show()}),this},hide:function(){return this.each(function(){this.enjoyhint_obj.hide()}),this},hide_prev:function(){return this.each(function(){this.enjoyhint_obj.hidePrevBtn()}),this},hide_next:function(){return this.each(function(){this.enjoyhint_obj.hideNextBtn()}),this},hide_skip:function(){return this.each(function(){this.enjoyhint_obj.hideSkipBtn()}),this},show_prev:function(){return this.each(function(){this.enjoyhint_obj.showPrevBtn()}),this},show_next:function(){return this.each(function(){this.enjoyhint_obj.showNextBtn()}),this},show_skip:function(){return this.each(function(){this.enjoyhint_obj.showSkipBtn()}),this},hide_close:function(){return this.each(function(){this.enjoyhint_obj.hideCloseBtn()}),this},show_close:function(){return this.each(function(){this.enjoyhint_obj.showCloseBtn()}),this},render_circle:function(t,e,n){return this.each(function(){this.enjoyhint_obj.renderCircle(t,e,n)}),this},render_label:function(t,e,n){return this.each(function(){this.enjoyhint_obj.renderLabel(t,e,n)}),this},render:function(t,e,n){return this.each(function(){F.stopFunction=e,this.enjoyhint_obj.render(t,n)}),this},redo_events_near_rect:function(t){F.disableEventsNearRect({top:t.top,bottom:t.bottom,left:t.left,right:t.right})},clear:function(){return this.each(function(){this.enjoyhint_obj.clear()}),this},close:function(t){return this.each(function(){this.enjoyhint_obj.closePopdown()}),this}};O.fn.enjoyhint=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(O.error("Method "+t+" does not exist."),this):e.init.apply(this,arguments)}});